<!DOCTYPE html>
<html>
    <head>
       <!--
            Home Page
            Author: Adam Rhoades
            Date:   9/23/2019
            Filename: MIA_home.html
       -->

        <title>Magnate Streaming Service</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="stylesheet" href="css/tf_styles1.css">
        <link rel="stylesheet" href="css/tf_flex.css">
        <link rel="stylesheet" href="css/tf_reset.css">
        <link rel="stylesheet" href="css/tf_navicon.css">
        <link rel="stylesheet" href="css/rb_forms.css">
        <!-- Add icon library -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        
        <script language="javascript" type="text/javascript">
            //<![CDATA[
            var file1;
    function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#blah')
                        .attr('src', e.target.result)
                        .width(150)
                        .height(200);
                };

                reader.readAsDataURL(input.files[0]);
                file1 = input.files[0]
            }
        }

    //]]>
    </script>


    </head>

    <body>
        <script>
            sessionStorage.setItem("signout", "out");
        </script>
        <header>
          <a href="MSS_Home.html" ><img src="img/kimlogobanner.png" alt="Magnate Streaming Service" style="background:center no-repeat; max-width:300px;
            max-height:200px;
            width:auto;
            height:auto;"></a>

            <nav class="horizontal">
                <a id="navicon" href="#" style="width:30px;height:30;"><img src="img/tf_navicon.png" alt=""></a>
                <ul class="mainmenu" style="margin: 0px 0px 0px 0px; padding: 0px 0px 0px 0px;">
                    <li><a href="MSS_Home.html" style="width: auto;  margin: 0px 0px 0px 0px;padding: 5px 5px 5px 5px;">Home</a></li>
                    <li><a href="MSS_Movie.html" style="width: auto; margin: 0px 0px 0px 0px;padding: 5px 5px 5px 5px;">Movies</a></li>
                    <li><a href="MSS_Podcast.html" style="width: auto; margin: 0px 0px 0px 0px;padding: 5px 5px 5px 5px;">Podcast</a></li>
                    <li><a href="MSS_Music.html" style="width: auto; margin: 0px 0px 0px 0px;padding: 5px 5px 5px 5px;" >Music</a></li>
                    <li><a href="MSS_Upload.html" id="currentPage" style="width: auto; margin: 0px 0px 0px 0px;padding: 5px 5px 5px 5px;" >Upload</a></li>
                    <li><a href="MSS_MngUpload.html" style="width: auto; margin: 0px 0px 0px 0px;padding: 5px 5px 5px 5px;" >Manage Upload</a></li>
                    <li><a href="MSS_Profile.html" style="width: auto; margin: 0px 0px 0px 0px;padding: 5px 5px 5px 5px;" >Profile</a></li>
                    <li><a href="MSS_Manage_Payment.html" style="width: auto; margin: 0px 0px 0px 0px;padding: 5px 5px 5px 5px;" >Manage Payment</a></li>
                    <li><a href="Login.html" style="width: auto; margin: 0px 0px 0px 0px;padding: 5px 5px 5px 5px;" >Sign-Out</a></li>
                </ul>
          </nav>

        </header>
   
        <section style="width:100%; background-color: rgb(0,0,0); padding:20px 5px 20px 5px;">
            <form style="width:300px; text-align: center; margin: auto; left: 0; right: 0; top: 0; bottom: 0; " id="register" action="MIA_submit.php" method="post" >
                <fieldset style="border-radius: 2%; background: rgb(255 ,255, 255) ;" id="userInfo">
                <legend style="color:rgb(255,255,255); background: rgb(0 ,0, 0); font-weight: bold;">New User</legend>
                <h1 class="row" >Image for you Icon</h1>

                <div class="row" style="text-align: center; width:300px; display: flex;" >
                    <div class="column" style="width:auto; padding:5px 5px 5px 5px;margin:5px 5px 5px 5px; "  >
                        <input id= "imageURL" style="width:450px; padding:0px;float:left; margin: auto; left: 0; right: 0; top: 0; bottom: 0;" type="file" onchange="showPreviewOne(event)"  accept="image/gif, image/jpeg, image/png" name="myfile">
                        <img style="width:50px; padding:0px; margin: auto; left: 0; right: 0; top: 0; bottom: 0; " id="blah" src="#" alt="" />
                    </div>	
                </div>


                 <script>

                     function showPreviewOne(event){
                         if(event.target.files.length > 0){
                             var src = URL.createObjectURL(event.target.files[0]);
                             file1 = src;
                             var preview = document.getElementById("blah");
                             preview.src = src;
                             preview.style.display = "block";
                         } 
                     }

                 </script>

                 <div class="row" style="padding:5px 5px 5px 5px;margin:5px 5px 5px 5px; width:auto;">
                     <label for="title">Title*</label>
                     <input name="custtitle" id="title" type="text" required />
                 </div>

                 <h1>File Type*</h1>

                 <div class="row" style="text-align: center;" >
                     <div class="column" style="display:flex; padding:5px 5px 5px 5px;margin:5px 5px 5px 5px; width:auto;" >
                         <input type="radio" id="movie" name="type" value="Movie">
                         <label for="movie">Movie</label><br>
                     </div>

                     <div class="column" style="display:flex;padding:5px 5px 5px 5px;margin:5px 5px 5px 5px; width:auto;" >
                         <input type="radio" id="music" name="type" value="Music">
                         <label for="music">Music</label><br>
                     </div>

                     <div class="column" style="display:flex;padding:5px 5px 5px 5px;margin:5px 5px 5px 5px; width:auto;" >
                         <input type="radio" id="podcast" name="type" value="Podcast">
                         <label for="podcast">Podcast</label><br>
                     </div>
                 </div>

                 <div class="row" style="text-align: center; width:300px; display: flex; padding:5px 5px 5px 5px;margin:5px 5px 5px 5px;" >
                     <input style="width:500px; padding:0px;float:left; margin: auto; left: 0; right: 0; top: 0; bottom: 0; " type="file" onchange="" id="fileURL"  name="fileURL"  >
                 </div>

                 <div class="row" style="padding:5px 5px 5px 5px;margin:5px 5px 5px 5px; width:50px;">
                     <label for="description" >Description*</label>
                     <input name="custdescription" id="description" type="text" value="" required />
                 </div>

                 <div class="row" style="padding:5px 5px 5px 5px;margin:5px 5px 5px 5px; width:auto;">
                     <label for="description" >Tags*</label>
                 </div>

                 <div class="row" style="padding:5px 5px 5px 5px;margin:5px 5px 5px 5px; width:auto;">
                     <input type="button" value="Pick Your Tags" id="popupbutton" onclick="popup()"/>
                     <ul id="checkBundle">
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="drama" type="checkbox" />Drama</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="comedy" type="checkbox" />Comedy</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="thriller" type="checkbox" />Thriller</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="romance" type="checkbox" />Romance</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="action" type="checkbox" />Action</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="horror" type="checkbox" />Horror</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="crime" type="checkbox" />Crime</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="adventure" type="checkbox" />Adventure</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="mystery" type="checkbox" />Mystery</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="family" type="checkbox" />Family</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;"  ><label><input id="war" type="checkbox" />War</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="educational" type="checkbox" />Educational</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="history" type="checkbox" />History</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="scifi" type="checkbox" />Sci-Fi</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="musical" type="checkbox" />Musical</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="animation" type="checkbox" />Animation</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="sports" type="checkbox" />Sports</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="news" type="checkbox" />News</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="blues" type="checkbox" />Blues</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="classical" type="checkbox" />Classical</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="country" type="checkbox" />Country</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="jazz" type="checkbox" />Jazz</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="hiphop" type="checkbox" />Hip-hop</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="soul" type="checkbox" />Soul</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="rock" type="checkbox" />Rock</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="pop" type="checkbox" />Pop</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="rb" type="checkbox" />R&B</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="latin" type="checkbox" />Latin</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="metal" type="checkbox" />Metal</label>
                         <li class="column" style="padding:2.5px 2.5px 2.5px 2.5px;margin:2.5px 2.5px 2.5px 2.5px; width:auto;" ><label><input id="rap" type="checkbox" />Rap</label>
                     </ul>
                     <script>
                         var popwindow = document.getElementById("checkBundle");
                         if(popwindow.style.display === "none"){
                         }
                         else if(popwindow.style.display === "block"){
                         }
                         else{
                             popwindow.style.display = "none"
                         }

                         function popup() {

                             if (popwindow.style.display === "none") {
                                 popwindow.style.display = "block";
                             } 
                             else {
                             popwindow.style.display = "none";
                             }
                         };
                     </script>

                     </div>
                         <div class="r1" style="max-width:400px;  padding-top:5px;">
                             <a ><button type="button" class="uplaodbtn" onclick="checkUpload()" >Upload</button></a>
                                         <!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.6.0/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/8.6.0/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.0/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.0/firebase-storage.js"></script>

                            <script>
                                // Your web app's Firebase configuration
                                // For Firebase JS SDK v7.20.0 and later, measurementId is optional
                                var firebaseConfig = {
                                  apiKey: "AIzaSyBKpk7-U_TkE3IApTOZFSMNIXuOg-PYPFs",
                                  authDomain: "kims-streamer.firebaseapp.com",
                                  databaseURL: "https://kims-streamer-default-rtdb.firebaseio.com",
                                  projectId: "kims-streamer",
                                  storageBucket: "kims-streamer.appspot.com",
                                  messagingSenderId: "1059071438295",
                                  appId: "1:1059071438295:web:71a7266e044585eb61ef92",
                                  measurementId: "G-J3LQRTX4SH"
                                };
                                // Initialize Firebase
                                firebase.initializeApp(firebaseConfig);
                                firebase.analytics();



                                function checkUpload(){
                                     var name = document.getElementById("title").value;
                                     var description = document.getElementById("description").value;
                                     var tags = "";
                                     document.getElementById('title').style.background = "rgb(255,255,255)";
                                     if(document.getElementById("drama").checked){
                                        tags += "drama ";
                                     }
                                     if(document.getElementById("comedy").checked){
                                        tags += "comedy ";
                                     }
                                     if(document.getElementById("thriller").checked){
                                        tags += "thriller ";
                                     }
                                     if(document.getElementById("romance").checked){
                                        tags += "romance ";
                                     }
                                     if(document.getElementById("action").checked){
                                        tags += "action ";
                                     }
                                     if(document.getElementById("horror").checked){
                                        tags += "horror ";
                                     }
                                     if(document.getElementById("crime").checked){
                                        tags += "crime ";
                                     }
                                     if(document.getElementById("adventure").checked){
                                        tags += "adventure ";
                                     }
                                     if(document.getElementById("mystery").checked){
                                        tags += "mystery ";
                                     }
                                     if(document.getElementById("family").checked){
                                        tags += "family ";
                                     }
                                     if(document.getElementById("war").checked){
                                        tags += "war ";
                                     }
                                     if(document.getElementById("educational").checked){
                                        tags += "educational ";
                                     }
                                     if(document.getElementById("history").checked){
                                        tags += "history ";
                                     }
                                     if(document.getElementById("scifi").checked){
                                        tags += "scifi ";
                                     }
                                     if(document.getElementById("musical").checked){
                                        tags += "musical ";
                                     }
                                     if(document.getElementById("animation").checked){
                                        tags += "animation ";
                                     }
                                     if(document.getElementById("sports").checked){
                                        tags += "sports ";
                                     }
                                     if(document.getElementById("news").checked){
                                        tags += "news ";
                                     }
                                     if(document.getElementById("blues").checked){
                                        tags += "blues ";
                                     }
                                     if(document.getElementById("classical").checked){
                                        tags += "classical ";
                                     }
                                     if(document.getElementById("country").checked){
                                        tags += "country ";
                                     }
                                     if(document.getElementById("jazz").checked){
                                        tags += "jazz ";
                                     }
                                     if(document.getElementById("hiphop").checked){
                                        tags += "hiphop ";
                                     }
                                     if(document.getElementById("soul").checked){
                                        tags += "soul ";
                                     }
                                     if(document.getElementById("rock").checked){
                                        tags += "rock ";
                                     }
                                     if(document.getElementById("pop").checked){
                                        tags += "pop ";
                                     }
                                     if(document.getElementById("rb").checked){
                                        tags += "randb ";
                                     }
                                     if(document.getElementById("latin").checked){
                                        tags += "latin ";
                                     }
                                     if(document.getElementById("metal").checked){
                                        tags += "metal ";
                                     }
                                     if(document.getElementById("rap").checked){
                                        tags += "rap ";
                                     }
                                     
                                     if(name.trim()===""){
                                document.getElementById('title').value = ""
                                document.getElementById('title').style.background = "rgb(255,50,0)";
                                document.getElementById('title').placeholder = "Enter a Title for Your Upload";
                                     }
                                    else{
                         //var  description = document.getElementById('desription').value;

                                         var  imageUrl = document.getElementById("imageURL").value;

                                         if(imageUrl !=""){

                                             var  fileUrl = document.getElementById("fileURL").value;
                                             var  movie = document.getElementById("movie");
                                             var  podcast = document.getElementById("podcast");
                                             var  music = document.getElementById("music");
                                             var type;
                                             if(movie.checked){
                                                 type = "Movie";
                                             }
                                             else if(music.checked){
                                                 type = "Music";
                                             }
                                             else if(podcast.checked){
                                                 type = "Podcast";
                                             }
                                             else{
                                                 type = "";
                                             }

                                             if(type != ""){
                                                 if(fileUrl != ""){
                                                     var ref = firebase.storage().ref().child('uploads');
                                                     var username = sessionStorage.getItem("user");
                                                     var email = sessionStorage.getItem("email");
                                                     var file = document.querySelector("#imageURL").files[0];  
                                                     var d = new Date();                                                   
                                                     var task = ref.child((name+"-i-"+ d.getTime()).toString()).put(file);
                                                     var imgURL = "";
                                                     task.then(snapshot => {
                                                        snapshot.ref.getDownloadURL().then(url => {
                                                            imgURL = url;
                                                            var file1 = document.querySelector("#fileURL").files[0];
                                                            var task2 = ref.child((name+"-f-"+ d.getTime()).toString()).put(file1);//child(uploads)
                                                            task2.then(snapshot2 => {
                                                                snapshot2.ref.getDownloadURL().then(url2 => {
                                                                    var fileURL = url2;
                                                                    var file2 = document.querySelector("#fileURL").value;
                                                            var extension = file2.split('.').pop();
                                                            alert(extension);
                                                                    firebase.database().ref().child('uploads').child(type).child(username+d.getTime()).set({
                                                                        author: username,
                                                                        count: "999999999999999999",
                                                                        descript: description,
                                                                        email: email,
                                                                        fileType: type,
                                                                        fileUrl: fileURL,
                                                                        imageUrl: imgURL,
                                                                        name: name,
                                                                        tags: tags,
                                                                        viewers: "",
                                                                        extension: extension
                                                                    });
                                                                    alert( username + " " +
                                                                        "999999999999999999" + " " +
                                                                         description + " " +
                                                                        email + " " +
                                                                        type  + " " +
                                                                        fileURL  + " " +
                                                                        imgURL + " " +
                                                                        name + " " +
                                                                        tags + " " +
                                                                        extension);
                                                                    //window.location.href = "MSS_Home.html";
                                                                });
                                                            });
                                                        });
                                                 //window.location.href = "MSS_Home.html";
                                                    });
                                                }
                                                else{
                                                     alert("Select a File to Upload");
                                                }
                                             }
                                             else{
                                                alert("Select a File Type");
                                            }
                                         }
                                         else{
                                             alert("Select an Image for an Icon")
                                         }
                                    }
                                 };
                             </script>
                             <a href="MSS_Home.html" ><button type="button" class="cancelbtn">Cancel</button></a>
                         </div>
                     </fieldset>		
                 </form>
             </section>
    
        <footer  style="height:50px">
            <a href="" class="facebook"><i class="fa fa-facebook" ></i></a>
            <a href="" class="fa fa-google" id="google"></a>
        </footer>
    </body>
</html>
